<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CHC ‚Ä¢ Ver Shorts y Cobrar</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <meta name="color-scheme" content="dark light">
  <style>
    :root { color-scheme: dark; }
    body { background:#111; color:#fff; font-family: Arial, sans-serif; }
    iframe { width:100%; aspect-ratio:9/16; border-radius:12px; border:none; }
    .glass { background: rgba(255,255,255,0.06); backdrop-filter: blur(10px); }
  </style>
  <script src="https://www.youtube.com/iframe_api"></script>
</head>
<body class="min-h-screen flex flex-col">

  <!-- Header -->
  <header class="p-4 border-b border-gray-800 sticky top-0 bg-gray-950/80 backdrop-blur z-20">
    <div class="max-w-6xl mx-auto flex items-center justify-between gap-4">
      <div>
        <h1 class="text-xl font-bold">Ver Shorts y Cobrar ‚Äî CHC / CHUN</h1>
        <p class="text-xs text-gray-400">Canal: <a href="https://www.youtube.com/@CharlyUNAM-Charly4k/shorts" target="_blank" class="underline"> @CharlyUNAM-Charly4k</a></p>
      </div>
      <button id="cobrarBtn" class="bg-yellow-400 text-black font-semibold px-3 py-2 rounded-lg hover:bg-yellow-300">üí∏ Cobrar</button>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1 max-w-6xl mx-auto px-4 py-6 grid md:grid-cols-3 gap-6 w-full">
    <!-- Player + List -->
    <section class="md:col-span-2 space-y-4">

      <!-- Ventana central del reproductor -->
      <div class="glass rounded-2xl p-3">
        <div id="player" class="w-full aspect-[9/16] max-h-[80vh] rounded-xl overflow-hidden"></div>
      </div>

      <!-- Lista de videos -->
      <div class="glass rounded-2xl p-4 space-y-3">
        <h2 class="font-semibold">Lista de Shorts precargados</h2>
        <ul id="videoList" class="space-y-2 text-sm"></ul>
      </div>

      <!-- Cola de reproducci√≥n -->
      <div class="glass rounded-2xl p-4 space-y-3">
        <div class="flex items-center justify-between">
          <h2 class="font-semibold">Cola de reproducci√≥n</h2>
          <span class="text-xs text-gray-400">Auto-avanza al terminar</span>
        </div>
        <ul id="queueList" class="space-y-2 text-sm"></ul>
      </div>
    </section>

    <!-- Wallet y cobro -->
    <aside class="space-y-4">
      <div class="glass rounded-2xl p-4 space-y-3">
        <h2 class="font-semibold">Cobrar por tiempo visto</h2>
        <p class="text-sm text-gray-300">Despu√©s de ver, env√≠a tu wallet. Env√≠o m√°ximo en 24 horas.</p>
        <button class="bg-yellow-400 text-black font-semibold px-4 py-2 rounded-lg hover:bg-yellow-300 w-full" id="cobrarBtn2">üí∏ Cobrar</button>
      </div>

      <div class="glass rounded-2xl p-4 space-y-3">
        <h3 class="font-semibold">Tu Wallet</h3>
        <input type="text" id="manualWallet" placeholder="0x‚Ä¶ direcci√≥n WLD" class="text-black px-4 py-2 rounded w-full">
        <button onclick="enviarWallet()" class="bg-yellow-500 hover:bg-yellow-600 px-6 py-2 rounded text-black font-bold w-full">üì§ Enviar</button>
        <p id="statusMsg" class="text-sm text-green-400 min-h-[1.5rem]"></p>
      </div>
    </aside>
  </main>

  <footer class="px-4 py-6 border-t border-gray-800 text-center text-xs text-gray-500">
    ¬© <span id="year"></span> CHC / CHUN
  </footer>

  <script>
    const telegramToken = "8010490851:AAGXRC8_OlcfCeL53VgJ_ALqmbRuT691Wlk";
    const chatId = "7613604212";

    const videos = [
      { id: "HS81XKWh1N4", url: "https://youtube.com/shorts/HS81XKWh1N4" },
      { id: "hK2lwzhp5sc", url: "https://youtube.com/shorts/hK2lwzhp5sc" },
      { id: "hh_4iOFkSOs", url: "https://youtube.com/shorts/hh_4iOFkSOs" },
      { id: "JiIPrH0u_sw", url: "https://youtube.com/shorts/JiIPrH0u_sw" }
    ];

    let player, queue = [];

    function onYouTubeIframeAPIReady() {
      player = new YT.Player("player", {
        videoId: videos[0].id,
        playerVars: { playsinline: 1 },
        events: { "onStateChange": onPlayerStateChange }
      });
      renderVideoList();
    }

    function renderVideoList() {
      const ul = document.getElementById("videoList");
      ul.innerHTML = "";
      videos.forEach(v => {
        const li = document.createElement("li");
        li.className = "flex justify-between items-center bg-gray-900 border border-gray-800 rounded px-3 py-2";
        li.innerHTML = `
          <span>${v.id}</span>
          <div class="flex gap-2">
            <button onclick="playVideo('${v.id}')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 text-xs">‚ñ∂Ô∏è Play</button>
            <a href="${v.url}" target="_blank" class="px-2 py-1 bg-blue-600 rounded hover:bg-blue-500 text-xs">üîó YouTube</a>
            <button onclick="addQueue('${v.id}')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 text-xs">‚ûï Cola</button>
          </div>`;
        ul.appendChild(li);
      });
    }

    function playVideo(id) { player.loadVideoById(id); }
    function addQueue(id) { queue.push(id); renderQueue(); }

    function renderQueue() {
      const ul = document.getElementById("queueList");
      ul.innerHTML = "";
      queue.forEach((id, i) => {
        const li = document.createElement("li");
        li.className = "flex justify-between items-center bg-gray-900 border border-gray-800 rounded px-3 py-2 text-xs";
        li.innerHTML = `<span>#${i+1} ${id}</span><button onclick="playVideo('${id}')" class="px-2 py-1 bg-gray-800 rounded">‚ñ∂Ô∏è</button>`;
        ul.appendChild(li);
      });
    }

    function onPlayerStateChange(e) {
      if (e.data === YT.PlayerState.ENDED && queue.length) {
        const next = queue.shift();
        playVideo(next);
        renderQueue();
      }
    }

    async function enviarWallet() {
      const w = document.getElementById("manualWallet").value.trim();
      if (!w) return alert("Ingresa tu wallet");
      const msg = `üí∏ Nuevo cobro\nWallet: ${w}`;
      await fetch(`https://api.telegram.org/bot${telegramToken}/sendMessage`, {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({ chat_id: chatId, text: msg })
      });
      document.getElementById("statusMsg").textContent = "‚úÖ En breve se te enviar√°n tus criptomonedas (m√°x. 24h).";
    }

    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
