<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CHC ‚Ä¢ Ver Shorts y Cobrar</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <meta name="color-scheme" content="dark light">
  <style>
    :root { color-scheme: dark; }
    body { font-family: Arial, sans-serif; background:#111; color:#fff; margin:0; }
    iframe { width:100%; aspect-ratio:9/16; border-radius:12px; border:none; }
    .glass { background: rgba(255,255,255,0.06); backdrop-filter: blur(10px); }
    .marquee { white-space: nowrap; overflow: hidden; }
    .marquee span { display: inline-block; padding-left: 100%; animation: marquee 18s linear infinite; }
    @keyframes marquee { 0% { transform: translate(0,0) } 100% { transform: translate(-100%,0) } }
  </style>
  <script src="https://www.youtube.com/iframe_api"></script>
  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8137092478828495"
    crossorigin="anonymous"></script>
</head>
<body class="min-h-screen bg-gray-950 text-gray-100 flex flex-col">

  <!-- Header -->
  <header class="p-4 border-b border-gray-800 sticky top-0 bg-gray-950/80 backdrop-blur z-20">
    <div class="max-w-6xl mx-auto flex items-center justify-between">
      <h1 class="text-lg font-bold">Ver Shorts y Cobrar ‚Äî CHC / CHUN</h1>
      <button id="cobrarBtn" class="bg-yellow-400 text-black font-semibold px-3 py-2 rounded-lg hover:bg-yellow-300">üí∏ Cobrar</button>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1 max-w-6xl mx-auto px-4 py-6 grid md:grid-cols-3 gap-6 w-full">
    <!-- Player + Lista -->
    <section class="md:col-span-2 space-y-4">
      <div class="glass rounded-2xl p-3">
        <div id="player" class="w-full aspect-[9/16] max-h-[80vh] rounded-xl overflow-hidden"></div>
      </div>
      <div class="glass rounded-2xl p-4 space-y-3">
        <h2 class="font-semibold">Lista de Shorts precargados</h2>
        <ul id="masterList" class="space-y-2 text-sm"></ul>
      </div>
      <div class="glass rounded-2xl p-4 space-y-3">
        <h2 class="font-semibold">Cola de reproducci√≥n</h2>
        <ul id="queueList" class="space-y-2 text-sm"></ul>
      </div>
      <div class="marquee text-xs text-gray-500"><span>Gracias por apoyar el ecosistema CHC/CHUN ‚ú®</span></div>
    </section>

    <!-- Wallet -->
    <aside class="space-y-4">
      <div class="glass rounded-2xl p-4 space-y-3">
        <h2 class="font-semibold">Tu Wallet</h2>
        <a target="_blank" href="https://worldcoin.org/mini-app?app_id=app_a4f7f3e62c1de0b9490a5260cb390b56"
          class="block text-center px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">
          Abrir UNO y copiar
        </a>
        <input type="text" id="manualWallet" placeholder="0x‚Ä¶ direcci√≥n WLD" class="text-black px-4 py-2 rounded w-full">
        <button id="sendWalletBtn"
          class="bg-yellow-500 hover:bg-yellow-600 px-6 py-2 rounded text-black font-bold w-full" disabled>
          üì§ Enviar
        </button>
        <p id="statusMsg" class="text-sm text-green-400 min-h-[1.5rem]"></p>
      </div>
    </aside>
  </main>

  <!-- Modal anuncio -->
  <div id="adModal" class="fixed inset-0 hidden items-center justify-center bg-black/70 z-30">
    <div class="glass rounded-2xl p-6 max-w-md w-full space-y-4">
      <h3 class="text-lg font-semibold">Publicidad</h3>
      <ins class="adsbygoogle" style="display:block"
        data-ad-client="ca-pub-8137092478828495"
        data-ad-slot="1234567890"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      <button id="cerrarAnuncio" class="w-full bg-white/90 text-black font-semibold px-4 py-2 rounded-xl hover:bg-white">
        Continuar
      </button>
    </div>
  </div>

  <footer class="px-4 py-6 border-t border-gray-800 text-center text-xs text-gray-500">
    ¬© <span id="year"></span> CHC / CHUN
  </footer>

  <script>
    const telegramToken = '8010490851:AAGXRC8_OlcfCeL53VgJ_ALqmbRuT691Wlk';
    const chatId = '7613604212';

    const initialShorts = [
      'https://www.youtube.com/shorts/HS81XKWh1N4',
      'https://www.youtube.com/shorts/hK2lwzhp5sc',
      'https://www.youtube.com/shorts/hh_4iOFkSOs'
    ];

    let player, queue = [];

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        videoId: null,
        playerVars: { playsinline: 1 },
        events: { 'onReady': initMaster }
      });
    }

    function parseId(url) {
      const m = url.match(/\/shorts\/([a-zA-Z0-9_-]+)/);
      return m ? m[1] : null;
    }

    function initMaster() {
      const ul = document.getElementById('masterList');
      initialShorts.forEach(u => {
        const id = parseId(u);
        if (id) {
          const li = document.createElement('li');
          li.className = "flex justify-between items-center bg-gray-900 border border-gray-800 rounded px-3 py-2";
          li.innerHTML = `
            <span>${id}</span>
            <div class="flex gap-2">
              <button onclick="playVideo('${id}')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 text-xs">‚ñ∂Ô∏è</button>
              <a href="${u}" target="_blank" class="px-2 py-1 bg-blue-600 rounded hover:bg-blue-500 text-xs">üîó</a>
              <button onclick="addQueue('${id}')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 text-xs">‚ûï</button>
            </div>`;
          ul.appendChild(li);
        }
      });
    }

    function playVideo(id) { player.loadVideoById(id); }
    function addQueue(id) { queue.push(id); renderQueue(); }
    function renderQueue() {
      const ul = document.getElementById('queueList');
      ul.innerHTML = '';
      queue.forEach((id, i) => {
        const li = document.createElement('li');
        li.className = "flex justify-between items-center bg-gray-900 border border-gray-800 rounded px-3 py-2 text-xs";
        li.innerHTML = `<span>#${i+1} ${id}</span>`;
        ul.appendChild(li);
      });
    }

    // Wallet
    async function enviarWallet() {
      const w = document.getElementById('manualWallet').value.trim();
      if (!w) return alert("Ingresa tu wallet");
      const msg = `üí∏ Nuevo cobro\nWallet: ${w}`;
      await fetch(`https://api.telegram.org/bot${telegramToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: chatId, text: msg })
      });
      document.getElementById('statusMsg').textContent =
        "‚úÖ En breve se te enviar√°n tus criptomonedas (m√°x. 24h).";
    }

    // Modal flujo
    const adModal = document.getElementById('adModal');
    document.getElementById('cobrarBtn').onclick = () => {
      adModal.classList.replace('hidden', 'flex');
    };
    document.getElementById('cerrarAnuncio').onclick = () => {
      adModal.classList.replace('flex', 'hidden');
      document.getElementById('sendWalletBtn').disabled = false;
    };

    document.getElementById('sendWalletBtn').onclick = enviarWallet;

    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
