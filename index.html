<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificación - CharlyCoin</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1e1e2f;
            color: #ffffff;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #2c2c3e;
            border-radius: 10px;
            box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.1);
        }
        img {
            width: 150px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        button {
            background: #f39c12;
            color: white;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover { background: #e67e22; }
    </style>
</head>
<body>

    <script>
        // Si el usuario ya está verificado, lo enviamos directo a next_page.html
        if (localStorage.getItem("verificado") === "true") {
            window.location.href = "./next_page.html";
        }
    </script>

    <div class="container">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgs4uyyEce9czJNopvAJUC-EuqRY0GilYfi7dguE0OEkUjTcrn6PVYsIFXo2NbemRvavHvVWsD8ru9ZGJXUpfhSVsUyrNYeJri7NP2XU6-9NUjbyrVjQtYUNjt7N9dUaouupuqlczAJlDqpYVhdArBcT7MRvEAwVfQv8JeOKD-EWAecMuSsfAE4gizyojtT/s1024/0ed01250-9b4a-4d44-924c-7c0011004aa0.webp" alt="CharlyCoin Logo">
        <h1>Verificación con Worldcoin</h1>
        <div id="world-id-button"></div>
        <p id="verificationResult"></p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@worldcoin/id"></script>
    <script>
        new WorldIDWidget({
            action_id: "app_7686f9027d3e3c0b53d987a3caf1e111",
            signal: "user_login",
            enableTelemetry: true,
            app_name: "CharlyCoin",
            theme: "light",
            containerId: "world-id-button",
            onSuccess: (proof) => {
                console.log("Verificación exitosa:", proof);
                localStorage.setItem("verificado", "true");  // Guardamos la verificación
                window.location.href = "./next_page.html";   // Redirigir si la verificación es correcta
            },
            onError: (error) => {
                console.error("Error en la verificación:", error);
                alert("Error en la verificación");
            }
        });
    </script>

</body>
</html>
