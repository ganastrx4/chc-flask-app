<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pagar con TronLink</title>
    <script src="https://cdn.jsdelivr.net/npm/@tronlink/ext"></script>
</head>
<body>
    <h1>Realizar Pago con TronLink</h1>
    <button id="payBtn">Pagar 1 TRX</button>

    <script>
        document.getElementById('payBtn').addEventListener('click', async () => {
            if (window.tronWeb && window.tronWeb.defaultAddress.base58) {
                const from = window.tronWeb.defaultAddress.base58;
                const to = "TXh7y1cokZhKaVL54irBgM99oXiohayeRo"; // Tu dirección TRX
                const amount = window.tronWeb.toSun(1); // 1 TRX en SUN

                try {
                    const tx = await window.tronWeb.transactionBuilder.sendTrx(to, amount, from);
                    const signedTx = await window.tronWeb.trx.sign(tx);
                    const result = await window.tronWeb.trx.sendRawTransaction(signedTx);
                    console.log("Transacción enviada:", result);
                    alert("¡Pago realizado con éxito!");
                } catch (error) {
                    console.error("Error al enviar TRX:", error);
                    alert("Hubo un error al realizar el pago.");
                }
            } else {
                alert("Por favor, inicia sesión en TronLink.");
            }
        });
    </script>
</body>
</html>
