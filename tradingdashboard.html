<!DOCTYPE html>
<html>
<head>
  <title>Ver Wallet World App</title>
</head>
<body>
  <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Trading Charly4K</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #fff; padding: 20px; }
    input, button { padding: 8px; margin: 5px; }
    .box { margin-bottom: 15px; }
  </style>
</head>
<body>
  <h1>Trading de Charly4K</h1>
  <p>ID Worldcoin: <a href="https://world.id/charly4k" target="_blank">charly4k.world.id</a></p>

  <div class="box">
    <label>Moneda 1: <input id="m1" value="PUF" /></label><br />
    <label>Moneda 2: <input id="m2" value="Dogecoin" /></label><br />
    <label>Moneda 3: <input id="m3" value="Mythic Egg" /></label><br />
    <label>Cantidad inicial: <input type="number" step="0.00000001" id="initial" value="0.1" /></label>
  </div>

  <div class="box">
    <label>1 <span id="l1">PUF</span> = <input type="number" step="0.00000001" id="r1" /> <span id="l2">Dogecoin</span></label><br />
    <label>1 <span id="l2b">Dogecoin</span> = <input type="number" step="0.00000001" id="r2" /> <span id="l3">Mythic Egg</span></label><br />
    <label>1 <span id="l1b">PUF</span> = <input type="number" step="0.00000001" id="r3" /> <span id="l3b">Mythic Egg</span></label>
  </div>

  <button onclick="calcular()">Calcular ciclos</button>

  <pre id="resultado"></pre>

  <script>
    function calcRuta(nombre, cantidad, ruta) {
      let monto = cantidad;
      for (let i = 0; i < ruta.length; i++) {
        monto *= ruta[i];
      }
      return { nombre, final: monto, ganancia: monto - cantidad };
    }

    function calcular() {
      const m1 = document.getElementById("m1").value;
      const m2 = document.getElementById("m2").value;
      const m3 = document.getElementById("m3").value;
      const cantidad = parseFloat(document.getElementById("initial").value);

      const r1 = parseFloat(document.getElementById("r1").value); // m1 -> m2
      const r2 = parseFloat(document.getElementById("r2").value); // m2 -> m3
      const r3 = parseFloat(document.getElementById("r3").value); // m1 -> m3

      // inversas
      const inv_r1 = 1 / r1;
      const inv_r2 = 1 / r2;
      const inv_r3 = 1 / r3;

      // rutas posibles
      const rutas = [
        [`${m1} ‚Üí ${m2} ‚Üí ${m3} ‚Üí ${m1}`, [r1, r2, 1 / r3]],
        [`${m1} ‚Üí ${m3} ‚Üí ${m2} ‚Üí ${m1}`, [r3, 1 / r2, 1 / r1]],
        [`${m2} ‚Üí ${m1} ‚Üí ${m3} ‚Üí ${m2}`, [inv_r1, r3, 1 / r2]],
        [`${m3} ‚Üí ${m2} ‚Üí ${m1} ‚Üí ${m3}`, [inv_r2, inv_r1, r3]]
      ];

      let mejor = null;
      let out = "=== Resultados ===\n";
      for (const [nombre, ruta] of rutas) {
        const r = calcRuta(nombre, cantidad, ruta);
        out += `${r.nombre} ‚Üí Final: ${r.final.toFixed(8)} | Ganancia: ${r.ganancia.toFixed(8)}\n`;
        if (!mejor || r.ganancia > mejor.ganancia) mejor = r;
      }
      out += `\nüî• Mejor ruta: ${mejor.nombre}\nGanancia: ${mejor.ganancia.toFixed(8)} usando ${cantidad} ${m1}`;

      document.getElementById("resultado").innerText = out;

      // Etiquetas en los inputs
      document.getElementById("l1").innerText = m1;
      document.getElementById("l2").innerText = m2;
      document.getElementById("l2b").innerText = m2;
      document.getElementById("l3").innerText = m3;
      document.getElementById("l1b").innerText = m1;
      document.getElementById("l3b").innerText = m3;
    }
  </script>
</body>
</html>

  <h2>Introduce tu direcci√≥n de World App</h2>
  <input type="text" id="direccionWallet" placeholder="0x...">
  <button onclick="consultarDatos()">Ver tokens</button>

  <div id="resultado"></div>

  <script>
    async function consultarDatos() {
      const address = document.getElementById("direccionWallet").value.trim();
      if (!address.startsWith("0x") || address.length !== 42) {
        alert("Direcci√≥n no v√°lida");
        return;
      }

      const apiKey = "ujOcGgmg0seoiSICk6SPU4tAyQJY6kvx"; // tu API key v√°lida
      const url = `https://worldchain-mainnet.g.alchemy.com/v2/${apiKey}`;

      const data = {
        jsonrpc: "2.0",
        id: 1,
        method: "alchemy_getTokenBalances",
        params: [address]
      };

      const respuesta = await fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const json = await respuesta.json();
      console.log(json);
      document.getElementById("resultado").innerText = JSON.stringify(json.result, null, 2);
    }
  </script>
</body>
</html>
